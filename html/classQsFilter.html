<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>quickstream: QsFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">quickstream
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">QsFilter Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="filter_8hpp_source.html">quickstream/filter.hpp</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7fe10703d3d802386a9f7a267c234979"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input</a> (void *inBuffers[], const size_t inLens[], const bool isFlushing[], uint32_t numInPorts, uint32_t numOutPorts)=0</td></tr>
<tr class="separator:a7fe10703d3d802386a9f7a267c234979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad19d65f753a3a5ce4eb0a4bc96fa7096"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQsFilter.html#ad19d65f753a3a5ce4eb0a4bc96fa7096">help</a> (FILE *file)</td></tr>
<tr class="separator:ad19d65f753a3a5ce4eb0a4bc96fa7096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c17952eb6e3ef5cbb0cd119e8e2865"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQsFilter.html#ac2c17952eb6e3ef5cbb0cd119e8e2865">start</a> (uint32_t numInPorts, uint32_t numOutPorts)</td></tr>
<tr class="separator:ac2c17952eb6e3ef5cbb0cd119e8e2865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac986f860e3c576a2f3ca56be0ce908b9"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQsFilter.html#ac986f860e3c576a2f3ca56be0ce908b9">stop</a> (uint32_t numInPorts, uint32_t numOutPorts)</td></tr>
<tr class="separator:ac986f860e3c576a2f3ca56be0ce908b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68083a338ba63d0884f97fd81da7d42"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQsFilter.html#af68083a338ba63d0884f97fd81da7d42">~QsFilter</a> (void)</td></tr>
<tr class="separator:af68083a338ba63d0884f97fd81da7d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>filter module base class that is inherited by C++ filter module classes</p>
<p>This is the base class that you can inherit to make a C++ filter module. You can use the CPP macro <a class="el" href="filter_8hpp.html#ab33c3c8716059cd1aabe552332e6e0d2">QS_LOAD_FILTER_MODULE()</a> to load your C++ object.</p>
<p>Below is an example C++ quickstream filter module: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;bitset&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="filter_8h.html">quickstream/filter.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="filter_8hpp.html">quickstream/filter.hpp</a>&quot;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class </span>Stdout: <span class="keyword">public</span> <a class="code" href="classQsFilter.html">QsFilter</a> {</div><div class="line"></div><div class="line">    <span class="keyword">public</span>:</div><div class="line"></div><div class="line">    Stdout(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> **argv) {</div><div class="line">        <span class="comment">// Parse args if you like ...</span></div><div class="line">    };</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="classQsFilter.html#ac2c17952eb6e3ef5cbb0cd119e8e2865">start</a>(uint32_t numInPorts, uint32_t numOutPorts) {</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span>(numInPorts &lt; 1) {</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;No inputs&quot;</span> &lt;&lt; std::endl;</div><div class="line">            <span class="keywordflow">return</span> -1; <span class="comment">// error fail</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span>(numOutPorts != 0) {</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;There should be no outputs &quot;</span></div><div class="line">                &lt;&lt; numOutPorts  &lt;&lt; <span class="stringliteral">&quot; found&quot;</span> &lt;&lt; std::endl;</div><div class="line">            <span class="keywordflow">return</span> -1; <span class="comment">// error fail</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span> 0; <span class="comment">// success</span></div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> <a class="code" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input</a>(<span class="keywordtype">void</span> *inBuffers[], <span class="keyword">const</span> <span class="keywordtype">size_t</span> inLens[],</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> isFlushing[],</div><div class="line">        uint32_t numInPorts, uint32_t numOutPorts) {</div><div class="line"></div><div class="line">        <span class="keywordtype">size_t</span> len = (size_t) inLens[0];</div><div class="line">        <span class="keywordflow">if</span>(len &gt; <a class="code" href="filter_8h.html#a81c15cea1fd154d737e12392d0a41018">QS_DEFAULTMAXWRITE</a>)</div><div class="line">            len = <a class="code" href="filter_8h.html#a81c15cea1fd154d737e12392d0a41018">QS_DEFAULTMAXWRITE</a>;</div><div class="line"></div><div class="line">        std::cout.write((<span class="keyword">const</span> <span class="keywordtype">char</span>*) inBuffers[0], len);</div><div class="line"></div><div class="line">        <a class="code" href="filter_8h.html#a2d5d75c3a5b93350850b60db25b92338">qsAdvanceInput</a>(0, len);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span>(std::cout.eof()) {</div><div class="line">            <span class="keywordflow">return</span> 1; <span class="comment">// done</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> 0; <span class="comment">// success continue</span></div><div class="line">    };</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> <a class="code" href="classQsFilter.html#ad19d65f753a3a5ce4eb0a4bc96fa7096">help</a>(FILE *file) {</div><div class="line"></div><div class="line">        fprintf(file,</div><div class="line"><span class="stringliteral">&quot;  Usage: stdoutCPP\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;  Reads 1 input and writes that to stdout.  This filter can have no\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;  outputs.\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;\n&quot;</span></div><div class="line">        );</div><div class="line">    };</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// QS_LOAD_FILTER_MODULE will add the needed code to make this a loadable</span></div><div class="line"><span class="comment">// quickstream module.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// We do not want a semicolon after this CPP macro</span></div><div class="line"><a class="code" href="filter_8hpp.html#ab33c3c8716059cd1aabe552332e6e0d2">QS_LOAD_FILTER_MODULE</a>(Stdout)</div><div class="line"></div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af68083a338ba63d0884f97fd81da7d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af68083a338ba63d0884f97fd81da7d42">&#9670;&nbsp;</a></span>~QsFilter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual QsFilter::~QsFilter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>optional destructor function</p>
<p>This function, if present, is called only once just before the filter is unloaded.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, and non-zero on failure. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7fe10703d3d802386a9f7a267c234979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fe10703d3d802386a9f7a267c234979">&#9670;&nbsp;</a></span>input()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int QsFilter::input </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>inBuffers</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>inLens</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>isFlushing</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numInPorts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numOutPorts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>required filter input work function</p>
<p><a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> is how the filters receive input from upstream filters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inBuffers</td><td>is a pointer to an array of the current data being passed in from an upstream filter, or 0 is this is a source filters. inBuffers is not const in case the filter uses the buffer to pass through data to a down stream filter by making the ports buffer a "pass
through" buffer.</td></tr>
    <tr><td class="paramname">inLens</td><td>is a pointer to an array of the size of the data in the inBuffers array in bytes. inLens is 0 if this is a source feed that has no inputs.</td></tr>
    <tr><td class="paramname">isFlushing</td><td>is a array of bools that show which input ports are being flushed from up stream. When a input port is being flushed than the input data in the buffer for that port will not be added to until the next stream flow cycle.</td></tr>
    <tr><td class="paramname">numInPorts</td><td>is the number of input buffers in the inBuffers input array. numInPorts will be the same value for the duration of the current flow cycle.</td></tr>
    <tr><td class="paramname">numOutPorts</td><td>is the number of output buffers that this filter is writing to. numOutPorts will be the same value for the duration of the current flow cycle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the values returned from <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> give the filters some control over how the stream and it's flow behaves. The return value 0 is the most common return value telling the stream to continue flowing normally. Returning a any non-zero value stops the calling of <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> for the current filter and sets up the final flushing of the down stream filters this the current filter is feeding. A return value that is negative is considered an "error like" case and will cause a warning to be printed to stderr. A positive return will not do that. </dd></dl>

</div>
</div>
<a id="ad19d65f753a3a5ce4eb0a4bc96fa7096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad19d65f753a3a5ce4eb0a4bc96fa7096">&#9670;&nbsp;</a></span>help()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void QsFilter::help </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>print filter module help and command line argument options</p>
<p>This function provides a brief description of what the filter does, and maybe a URL to get more information about the filter, and a list of command line argument options. The output calling this function should be the kind of thing produced from typical &ndash;help command line option.</p>
<p>When <a class="el" href="classQsFilter.html#ad19d65f753a3a5ce4eb0a4bc96fa7096">help()</a> is called additional generic text will be added to the output file that describes all quickstream filters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>output FILE stream that may be called with the standard C libraries fprintf() function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac2c17952eb6e3ef5cbb0cd119e8e2865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c17952eb6e3ef5cbb0cd119e8e2865">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int QsFilter::start </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numInPorts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numOutPorts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>optional filter start function</p>
<p>This function, if present, is called each time the stream starts running, just before any filter in the stream has it's <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> function called. We call this time the start of a flow cycle. After this is called <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> will be called in a regular fashion for the duration of the flow cycle.</p>
<p>This function lets that filter determine what the number of inputs and outputs before it has it's <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> function called. For "smarter" filters this can spawn a series of initialization interactions between the "smarter" filters in the stream.</p>
<p>The following functions may only be called in the filters <a class="el" href="classQsFilter.html#ac2c17952eb6e3ef5cbb0cd119e8e2865">start()</a> function: <a class="el" href="filter_8h.html#a7355804b2e92c399de953a56a83e0e45">qsCreateOutputBuffer()</a>, <a class="el" href="filter_8h.html#a09f00d918f0b1475dcad2a3393c20159">qsCreatePassThroughBuffer()</a>, <a class="el" href="filter_8h.html#aabefd90107551a4a1d07316616e0925d">qsSetInputThreshold()</a>, <a class="el" href="filter_8h.html#ac6c3210a19bf7a599cb37572333d614f">qsSetInputReadPromise()</a>, and <a class="el" href="filter_8h.html#a60c38a92d45e72032603d8ab71fba3d3">qsGetFilterName()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numInPorts</td><td>is the number of input buffers in the inBuffers input array. numInPorts will be the same value for the duration of the current flow cycle.</td></tr>
    <tr><td class="paramname">numOutPorts</td><td>is the number of output buffers that this filter is writing to. numOutPorts will be the same value for the duration of the current flow cycle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or non-zero on failure. </dd></dl>

</div>
</div>
<a id="ac986f860e3c576a2f3ca56be0ce908b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac986f860e3c576a2f3ca56be0ce908b9">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int QsFilter::stop </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numInPorts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numOutPorts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Optional filter stop function</p>
<p>This function, if present, is called each time the stream stops running, just after any filter in the stream has it's <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> function called for the last time in a flow/run cycle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numInPorts</td><td>is the number of input buffers was in inBuffers input array. numInPorts will be the same value as 173it was when the corresponding <a class="el" href="classQsFilter.html#ac2c17952eb6e3ef5cbb0cd119e8e2865">start()</a> and <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> was called.</td></tr>
    <tr><td class="paramname">numOutPorts</td><td>is the number of output buffers that this filter is writing to. numOutPorts will be the same value as it was when the corresponding <a class="el" href="classQsFilter.html#ac2c17952eb6e3ef5cbb0cd119e8e2865">start()</a> and <a class="el" href="classQsFilter.html#a7fe10703d3d802386a9f7a267c234979">input()</a> was called.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or non-zero on failure. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="filter_8hpp_source.html">filter.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
